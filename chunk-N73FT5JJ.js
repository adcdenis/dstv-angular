import{b as X}from"./chunk-VZYHY7HD.js";import{a as K}from"./chunk-WRKS3KBU.js";import{a as U,b as $}from"./chunk-DTX2IFH6.js";import{a as J,b as Q}from"./chunk-W22XDKEB.js";import"./chunk-3CQIXJFX.js";import"./chunk-4JDA26ZU.js";import{k as H}from"./chunk-QXXVWUSP.js";import"./chunk-MZURXKLX.js";import"./chunk-4Q7UP2TF.js";import"./chunk-XCSSQDET.js";import"./chunk-LJGI4ZRP.js";import"./chunk-T2PIK6R3.js";import"./chunk-7SPUUUGD.js";import"./chunk-SFTIWTHH.js";import{i as z}from"./chunk-WSIWJYJX.js";import"./chunk-NJPLBFLS.js";import"./chunk-MDZH7E7N.js";import"./chunk-V6X5IB37.js";import"./chunk-V5XYQFDX.js";import"./chunk-3GJN2BSD.js";import"./chunk-UW4E5NSV.js";import"./chunk-6LXUGSQP.js";import{b as G}from"./chunk-UGHG6TU3.js";import"./chunk-UAXJ67OE.js";import{b as F,c as v,e as N,g as B,m as R,n as j,o as L}from"./chunk-KLIUDW4T.js";import"./chunk-S35HUXPS.js";import{b as W,d as q}from"./chunk-4B2QLF32.js";import{k as x}from"./chunk-BFP4OEA6.js";import{Aa as P,Bb as D,F as f,Ka as e,L as w,La as s,M as E,Oa as V,Pa as I,Qa as k,Ra as A,Tb as b,Y as m,Z as g,da as C,ea as h,ja as T,ma as M,sa as o,sb as O,ta as t,ua as c,ya as y,za as u}from"./chunk-UX7NIMCO.js";import"./chunk-EQC2ISW6.js";import"./chunk-YT5AF7SN.js";import{a as S,b as _,h as d}from"./chunk-MG3ERZGY.js";function oe(a,te){if(a&1){let i=y();o(0,"button",15),u("click",function(){let r=w(i).$implicit,l=P();return E(l.inserirToken(r.value))}),t()}if(a&2){let i=te.$implicit;M("label",i.label)}}var Z=(()=>{class a{constructor(i,n,r){this.fb=i,this.mensagemService=n,this.messageService=r,this.form=this.fb.group({id:[""],nome:["",[v.required,v.minLength(3)]],corpo:["",[v.required,v.minLength(10)]],ativo:[!0]}),this.previewText="",this.tokens=[{label:"Sauda\xE7\xE3o",value:"{{saudacao}}"},{label:"Nome",value:"{{nome}}"},{label:"Telefone",value:"{{telefone}}"},{label:"Usu\xE1rio",value:"{{usuario}}"},{label:"Data Vencimento",value:"{{dataVencimento}}"},{label:"Plano Nome",value:"{{plano.nome}}"},{label:"Plano Valor",value:"{{plano.valor}}"}]}ngOnInit(){return d(this,null,function*(){let i=yield this.mensagemService.getAtiva();i?this.form.patchValue(i):this.form.patchValue({nome:"WhatsApp Padr\xE3o",ativo:!0,corpo:this.defaultCorpo()}),this.computePreview(),this.form.get("corpo")?.valueChanges.subscribe(()=>this.computePreview())})}novo(){this.form.reset({ativo:!1})}editar(i){this.form.patchValue(i)}salvar(){return d(this,null,function*(){let i=yield this.mensagemService.getAtiva(),n=_(S({},this.form.value),{ativo:!0,nome:"WhatsApp Padr\xE3o"});i&&i.id?(n.id=i.id,yield this.mensagemService.update(n)):n.id?yield this.mensagemService.update(n):yield this.mensagemService.create(n),this.messageService.add({severity:"success",summary:"Sucesso",detail:"Template salvo"})})}excluir(i){return d(this,null,function*(){})}inserirToken(i){let n=this.form.get("corpo")?.value||"";this.form.patchValue({corpo:n+i})}marcarAtivo(i){return d(this,null,function*(){})}defaultCorpo(){return`Ol\xE1, {{saudacao}}
*Segue seu vencimento IPTV* 
*Vencimento:* _{{dataVencimento}}_

*PLANO CONTRATADO* 
\u2B55 _Plano:_ *{{plano.nome}}* 
\u2B55 _Valor:_ *R$ {{plano.valor}}* 
\u2B55 _Conta:_ *{{usuario}}*

*FORMAS DE PAGAMENTOS* 
\u2705 Pic Pay : @canutobr
\u2705 Banco do Brasil: ag 3020-1 cc 45746-9
\u2705 Pix: canutopixbb@gmail.com 

- Dura\xE7\xE3o da lista 30 dias, acesso de um ponto, n\xE3o permite conex\xF5es simult\xE2neas. 

- Assim que efetuar o pagamento, enviar o comprovante e vou efetuar a contrata\xE7\xE3o/renova\xE7\xE3o o mais r\xE1pido poss\xEDvel.

-*Aguardamos seu contato para renova\xE7\xE3o!*`}computePreview(){let i=this.form.get("corpo")?.value||"",n=new Date().getHours(),r=n>6&&n<12?"bom dia!":n>=12&&n<18?"boa tarde!":"boa noite!",l={nome:"Jo\xE3o da Silva",telefone:"55999999999",usuario:"usuario123",dataVencimento:new Date().toLocaleDateString("pt-BR"),plano:{nome:"Plano Premium",valor:"49,90"}};this.previewText=(i||"").replace(/\{\{saudacao\}\}/g,r).replace(/\{\{nome\}\}/g,l.nome).replace(/\{\{telefone\}\}/g,l.telefone).replace(/\{\{usuario\}\}/g,l.usuario).replace(/\{\{dataVencimento\}\}/g,l.dataVencimento).replace(/\{\{plano\.nome\}\}/g,l.plano.nome).replace(/\{\{plano\.valor\}\}/g,l.plano.valor)}limpar(){this.form.patchValue({corpo:""}),this.computePreview()}static{this.\u0275fac=function(n){return new(n||a)(g(R),g(K),g(x))}}static{this.\u0275cmp=C({type:a,selectors:[["app-mensagem"]],standalone:!1,features:[A([x])],decls:77,vars:11,consts:[[1,"grid"],[1,"col-12","md:col-4"],[1,"card","p-fluid"],[1,"field"],["for","corpo"],["pInputTextarea","","id","corpo","rows","20",1,"corpo-textarea",3,"ngModelChange","ngModel"],[1,"flex","flex-wrap","gap-2"],["pButton","","type","button","class","p-button-outlined",3,"label","click",4,"ngFor","ngForOf"],[1,"card"],[1,"pre-wrap"],[1,"col-12"],[1,"grid","mt-3"],[1,"col-12","md:col-6"],["pButton","","type","button","icon","pi pi-times","label","Limpar",1,"p-button-danger",2,"width","100%",3,"click"],["pButton","","type","button","icon","pi pi-check","label","Salvar",1,"p-button-success",2,"width","100%",3,"click"],["pButton","","type","button",1,"p-button-outlined",3,"click","label"]],template:function(n,r){n&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5"),e(4,"Template"),t(),o(5,"div",3)(6,"label",4),e(7,"Mensagem"),t(),o(8,"textarea",5),k("ngModelChange",function(p){return I(r.form.value.corpo,p)||(r.form.value.corpo=p),p}),u("ngModelChange",function(p){return r.form.patchValue({corpo:p})}),t()(),o(9,"div",6),T(10,oe,1,1,"button",7),t()()(),o(11,"div",1)(12,"div",8)(13,"h5"),e(14,"Pr\xE9-visualiza\xE7\xE3o"),t(),o(15,"pre",9),e(16),t()()(),o(17,"div",1)(18,"div",8)(19,"h5"),e(20,"Formata\xE7\xE3o WhatsApp"),t(),o(21,"p"),e(22," - Negrito: envolver com "),o(23,"code"),e(24,"*texto*"),t(),c(25,"br"),e(26," - It\xE1lico: envolver com "),o(27,"code"),e(28,"_texto_"),t(),c(29,"br"),e(30," - Tachado: envolver com "),o(31,"code"),e(32,"~texto~"),t(),c(33,"br"),e(34," - Monoespa\xE7o: envolver com "),o(35,"code"),e(36,"`texto`"),t(),c(37,"br"),e(38," - Quebra de linha: usar quebra normal; \xE9 enviada como "),o(39,"code"),e(40,"\\n"),t(),e(41," automaticamente. "),t(),o(42,"h6"),e(43,"Tokens dispon\xEDveis"),t(),o(44,"ul")(45,"li")(46,"code"),e(47),t(),e(48,", "),o(49,"code"),e(50),t(),e(51,", "),o(52,"code"),e(53),t(),e(54,", "),o(55,"code"),e(56),t()(),o(57,"li")(58,"code"),e(59),t(),e(60,", "),o(61,"code"),e(62),t(),e(63,", "),o(64,"code"),e(65),t()()(),o(66,"h6"),e(67,"Mensagem padr\xE3o"),t(),o(68,"pre",9),e(69),t()()(),o(70,"div",10)(71,"div",11)(72,"div",12)(73,"button",13),u("click",function(){return r.limpar()}),t()(),o(74,"div",12)(75,"button",14),u("click",function(){return r.salvar()}),t()()()(),c(76,"p-toast"),t()),n&2&&(m(8),V("ngModel",r.form.value.corpo),m(2),M("ngForOf",r.tokens),m(6),s(r.previewText),m(31),s("{{saudacao}}"),m(3),s("{{nome}}"),m(3),s("{{telefone}}"),m(3),s("{{usuario}}"),m(3),s("{{dataVencimento}}"),m(3),s("{{plano.nome}}"),m(3),s("{{plano.valor}}"),m(4),s(r.defaultCorpo()))},dependencies:[O,F,N,B,W,J,U],styles:[".tokens[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.corpo-textarea[_ngcontent-%COMP%]{min-height:468px}.card[_ngcontent-%COMP%]{overflow:hidden}.pre-wrap[_ngcontent-%COMP%]{white-space:pre-wrap;word-break:break-word;overflow-wrap:anywhere}"]})}}return a})();var ee=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=h({type:a})}static{this.\u0275inj=f({imports:[b.forChild([{path:"",component:Z}]),b]})}}return a})();var Ve=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=h({type:a})}static{this.\u0275inj=f({imports:[D,ee,L,j,H,q,G,Q,X,z,$]})}}return a})();export{Ve as MensagemModule};
