import{a as E}from"./chunk-R6YKVK7D.js";import{a as Ae,d as W,e as Ee,f as Te}from"./chunk-6LXUGSQP.js";import{Db as ce,E as D,F as se,G as g,H as d,Qb as le,R as $,T as H,b as N,c as ne,ea as ae,gb as L,h as I,i as S,j as x,k as C,l as y,q as re,r as ie,v as oe,w as F,y as v,z as j}from"./chunk-UX7NIMCO.js";import{Ea as ge,G as z,Ia as me,a as ue,d as B,eb as ke,m as de,o as pe,t as K,ta as he,v as fe,z as U}from"./chunk-EQC2ISW6.js";import{h as A}from"./chunk-MG3ERZGY.js";var Pt={name:"dstv-angular",version:"4.1.1",scripts:{ng:"ng",start:"ng serve --host 0.0.0.0 --disable-host-check --poll 1",build:"ng build",watch:"ng build --watch --configuration development",test:"ng test"},private:!0,dependencies:{"@angular/animations":"~19.0.3","@angular/cdk":"~17.3.0","@angular/common":"~19.0.3","@angular/compiler":"~19.0.3","@angular/core":"~19.0.3","@angular/fire":"~17.0.1","@angular/forms":"~19.0.3","@angular/platform-browser":"~19.0.3","@angular/platform-browser-dynamic":"~19.0.3","@angular/router":"~19.0.3","chart.js":"~4.4.2","dstv-angular":"file:","file-saver":"~2.0.5",firebase:"~10.9.0",primeflex:"~3.3.1",primeicons:"6.0.1",primeng:"17.11.0",prismjs:"~1.29.0",rxjs:"~7.8.1",tslib:"~2.6.2","web-animations-js":"~2.3.2",xlsx:"~0.18.5","zone.js":"~0.15.0"},devDependencies:{"@angular-devkit/build-angular":"~19.0.4","@angular/cli":"~19.0.4","@angular/compiler-cli":"~19.0.3","@types/file-saver":"~2.0.7","@types/jasmine":"~5.1.4","@types/jasminewd2":"~2.0.13","@types/node":"~20.11.27",codelyzer:"~6.0.2","jasmine-core":"~5.1.2","jasmine-spec-reporter":"~7.0.0",karma:"~6.4.3","karma-chrome-launcher":"~3.2.0","karma-coverage":"~2.2.1","karma-coverage-istanbul-reporter":"~3.0.3","karma-jasmine":"~5.1.0","karma-jasmine-html-reporter":"~2.1.0",protractor:"~7.0.0","ts-node":"~10.9.2",tslint:"~6.1.3",typescript:"~5.5.4"}};var He="firebase",Le="10.9.0";E.registerVersion(He,Le,"app-compat");var Be=["ngOnDestroy"],ve=(e,r,t,n={})=>new Proxy(e,{get:(i,o)=>t.runOutsideAngular(()=>{if(e[o])return n?.spy?.get&&n.spy.get(o,e[o]),e[o];if(Be.indexOf(o)>-1)return()=>{};let a=r.toPromise().then(c=>{let s=c?.[o];return typeof s=="function"?s.bind(c):s?.then?s.then(u=>t.run(()=>u)):t.run(()=>s)});return new Proxy(()=>{},{get:(c,s)=>a[s],apply:(c,s,u)=>a.then(h=>{let b=h?.(...u);return n?.spy?.apply&&n.spy.apply(o,u,b),b})})})});var V=class{constructor(r){return r}},be=new g("angularfire2.app.options"),ye=new g("angularfire2.app.name");function _e(e,r,t){let n=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||n;let a=E.apps.filter(c=>c&&c.name===i.name)[0]||r.runOutsideAngular(()=>E.initializeApp(e,i));try{if(JSON.stringify(e)!==JSON.stringify(a.options)){let c=!!module.hot;Ke("error",`${a.name} Firebase App already initialized with different options${c?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new V(a)}var Ke=(e,...r)=>{L()&&typeof console<"u"&&console[e](...r)};function Ie(e,r,t,n,i){let[,o,a]=globalThis.\u0275AngularfireInstanceCache.find(c=>c[0]===e)||[];if(o)return Ue(i,a)||(we("error",`${r} was already initialized on the ${t} Firebase App with different settings.${ze?" You may need to reload as Firebase is not HMR aware.":""}`),we("warn",{is:i,was:a})),o;{let c=n();return globalThis.\u0275AngularfireInstanceCache.push([e,c,i]),c}}function Ue(e,r){try{return e.toString()===r.toString()}catch{return e===r}}var ze=typeof module<"u"&&!!module.hot,we=(e,...r)=>{L()&&typeof console<"u"&&console[e](...r)};globalThis.\u0275AngularfireInstanceCache||=[];var We=new Map,Ve={activated:!1,tokenObservers:[]},qe={initialized:!1,enabled:!1};function f(e){return We.get(e)||Object.assign({},Ve)}function De(){return qe}var Ge="https://content-firebaseappcheck.googleapis.com/v1";var Xe="exchangeDebugToken",Ce={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Yt=24*60*60*1e3;var G=class{constructor(r,t,n,i,o){if(this.operation=r,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(r){return A(this,null,function*(){this.stop();try{this.pending=new B,this.pending.promise.catch(t=>{}),yield Ye(this.getNextRun(r)),this.pending.resolve(),yield this.pending.promise,this.pending=new B,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(r){if(r)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Ye(e){return new Promise(r=>{setTimeout(r,e)})}var Je={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},T=new pe("appCheck","AppCheck",Je);function Oe(e){if(!f(e).activated)throw T.create("use-before-activation",{appName:e.name})}function Me(n,i){return A(this,arguments,function*({url:e,body:r},t){let o={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&(o["X-Firebase-Client"]=p)}let c={method:"POST",body:JSON.stringify(r),headers:o},s;try{s=yield fetch(e,c)}catch(p){throw T.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw T.create("fetch-status-error",{httpStatus:s.status});let u;try{u=yield s.json()}catch(p){throw T.create("fetch-parse-error",{originalErrorMessage:p?.message})}let h=u.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw T.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let b=Number(h[1])*1e3,R=Date.now();return{token:u.token,expireTimeMillis:R+b,issuedAtTimeMillis:R}})}function Ne(e,r){let{projectId:t,appId:n,apiKey:i}=e.options;return{url:`${Ge}/projects/${t}/apps/${n}:${Xe}?key=${i}`,body:{debug_token:r}}}var Ze="firebase-app-check-database",Qe=1,X="firebase-app-check-store";var O=null;function et(){return O||(O=new Promise((e,r)=>{try{let t=indexedDB.open(Ze,Qe);t.onsuccess=n=>{e(n.target.result)},t.onerror=n=>{var i;r(T.create("storage-open",{originalErrorMessage:(i=n.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=n=>{let i=n.target.result;switch(n.oldVersion){case 0:i.createObjectStore(X,{keyPath:"compositeKey"})}}}catch(t){r(T.create("storage-open",{originalErrorMessage:t?.message}))}}),O)}function tt(e,r){return nt(rt(e),r)}function nt(e,r){return A(this,null,function*(){let n=(yield et()).transaction(X,"readwrite"),o=n.objectStore(X).put({compositeKey:e,value:r});return new Promise((a,c)=>{o.onsuccess=s=>{a()},n.onerror=s=>{var u;c(T.create("storage-set",{originalErrorMessage:(u=s.target.error)===null||u===void 0?void 0:u.message}))}})})}function rt(e){return`${e.options.appId}-${e.name}`}var Y=new fe("@firebase/app-check");function q(e,r){return de()?tt(e,r).catch(t=>{Y.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function xe(){return De().enabled}function Fe(){return A(this,null,function*(){let e=De();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var it={error:"UNKNOWN_ERROR"};function ot(e){return ue.encodeString(JSON.stringify(e),!1)}function J(e,r=!1){return A(this,null,function*(){let t=e.app;Oe(t);let n=f(t),i=n.token,o;if(i&&!P(i)&&(n.token=void 0,i=void 0),!i){let s=yield n.cachedTokenPromise;s&&(P(s)?i=s:yield q(t,void 0))}if(!r&&i&&P(i))return{token:i.token};let a=!1;if(xe()){n.exchangeTokenPromise||(n.exchangeTokenPromise=Me(Ne(t,yield Fe()),e.heartbeatServiceProvider).finally(()=>{n.exchangeTokenPromise=void 0}),a=!0);let s=yield n.exchangeTokenPromise;return yield q(t,s),n.token=s,{token:s.token}}try{n.exchangeTokenPromise||(n.exchangeTokenPromise=n.provider.getToken().finally(()=>{n.exchangeTokenPromise=void 0}),a=!0),i=yield f(t).exchangeTokenPromise}catch(s){s.code==="appCheck/throttled"?Y.warn(s.message):Y.error(s),o=s}let c;return i?o?P(i)?c={token:i.token,internalError:o}:c=Re(o):(c={token:i.token},n.token=i,yield q(t,i)):c=Re(o),a&&lt(t,c),c})}function st(e){return A(this,null,function*(){let r=e.app;Oe(r);let{provider:t}=f(r);if(xe()){let n=yield Fe(),{token:i}=yield Me(Ne(r,n),e.heartbeatServiceProvider);return{token:i}}else{let{token:n}=yield t.getToken();return{token:n}}})}function at(e,r,t,n){let{app:i}=e,o=f(i),a={next:t,error:n,type:r};if(o.tokenObservers=[...o.tokenObservers,a],o.token&&P(o.token)){let c=o.token;Promise.resolve().then(()=>{t({token:c.token}),Pe(e)}).catch(()=>{})}o.cachedTokenPromise.then(()=>Pe(e))}function je(e,r){let t=f(e),n=t.tokenObservers.filter(i=>i.next!==r);n.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=n}function Pe(e){let{app:r}=e,t=f(r),n=t.tokenRefresher;n||(n=ct(e),t.tokenRefresher=n),!n.isRunning()&&t.isTokenAutoRefreshEnabled&&n.start()}function ct(e){let{app:r}=e;return new G(()=>A(this,null,function*(){let t=f(r),n;if(t.token?n=yield J(e,!0):n=yield J(e),n.error)throw n.error;if(n.internalError)throw n.internalError}),()=>!0,()=>{let t=f(r);if(t.token){let n=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return n=Math.min(n,i),Math.max(0,n-Date.now())}else return 0},Ce.RETRIAL_MIN_WAIT,Ce.RETRIAL_MAX_WAIT)}function lt(e,r){let t=f(e).tokenObservers;for(let n of t)try{n.type==="EXTERNAL"&&r.error!=null?n.error(r.error):n.next(r)}catch{}}function P(e){return e.expireTimeMillis-Date.now()>0}function Re(e){return{token:ot(it),error:e}}var Z=class{constructor(r,t){this.app=r,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:r}=f(this.app);for(let t of r)je(this.app,t.next);return Promise.resolve()}};function ut(e,r){return new Z(e,r)}function dt(e){return{getToken:r=>J(e,r),getLimitedUseToken:()=>st(e),addTokenListener:r=>at(e,"INTERNAL",r),removeTokenListener:r=>je(e.app,r)}}var pt="@firebase/app-check",ft="0.8.2";var ht="app-check",Se="app-check-internal";function gt(){U(new K(ht,e=>{let r=e.getProvider("app").getImmediate(),t=e.getProvider("heartbeat");return ut(r,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,t)=>{e.getProvider(Se).initialize()})),U(new K(Se,e=>{let r=e.getProvider("app-check").getImmediate();return dt(r)},"PUBLIC").setInstantiationMode("EXPLICIT")),z(pt,ft)}gt();var mt=["localhost","0.0.0.0","127.0.0.1"],ln=typeof window<"u"&&mt.includes(window.location.hostname);var Et=new g("angularfire2.auth.use-emulator"),Tt=new g("angularfire2.auth.settings"),wt=new g("angularfire2.auth.tenant-id"),vt=new g("angularfire2.auth.langugage-code"),bt=new g("angularfire2.auth.use-device-language"),yt=new g("angularfire.auth.persistence"),_t=(e,r,t,n,i,o,a,c)=>Ie(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{let s=r.runOutsideAngular(()=>e.auth());if(t&&s.useEmulator(...t),n&&(s.tenantId=n),s.languageCode=i,o&&s.useDeviceLanguage(),a)for(let[u,h]of Object.entries(a))s.settings[u]=h;return c&&s.setPersistence(c),s},[t,n,i,o,a,c]),Q=(()=>{class e{authState;idToken;user;idTokenResult;credential;constructor(t,n,i,o,a,c,s,u,h,b,R,p){let ee=new ne,_=C(void 0).pipe(I(a.outsideAngular),v(()=>o.runOutsideAngular(()=>import("./chunk-YOZRPSJQ.js"))),y(()=>_e(t,o,n)),y(k=>_t(k,o,c,u,h,b,s,R)),F({bufferSize:1,refCount:!1}));if(ce(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=C(null);else{_.pipe(oe()).subscribe();let k=_.pipe(v(l=>l.getRedirectResult().then(m=>m,()=>null)),Te,F({bufferSize:1,refCount:!1})),te=_.pipe(v(l=>new N(m=>({unsubscribe:o.runOutsideAngular(()=>l.onAuthStateChanged(w=>m.next(w),w=>m.error(w),()=>m.complete()))})))),M=_.pipe(v(l=>new N(m=>({unsubscribe:o.runOutsideAngular(()=>l.onIdTokenChanged(w=>m.next(w),w=>m.error(w),()=>m.complete()))}))));this.authState=k.pipe(j(te),S(a.outsideAngular),I(a.insideAngular)),this.user=k.pipe(j(M),S(a.outsideAngular),I(a.insideAngular)),this.idToken=this.user.pipe(v(l=>l?x(l.getIdToken()):C(null))),this.idTokenResult=this.user.pipe(v(l=>l?x(l.getIdTokenResult()):C(null))),this.credential=re(k,ee,this.authState.pipe(ie(l=>!l))).pipe(y(l=>l?.user?l:null),S(a.outsideAngular),I(a.insideAngular))}return ve(this,_,o,{spy:{apply:(k,te,M)=>{(k.startsWith("signIn")||k.startsWith("createUser"))&&M.then(l=>ee.next(l))}}})}static \u0275fac=function(n){return new(n||e)(d(be),d(ye,8),d(H),d($),d(Ee),d(Et,8),d(Tt,8),d(wt,8),d(vt,8),d(bt,8),d(yt,8),d(W,8))};static \u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})(),In=(()=>{class e{constructor(){E.registerVersion("angularfire",Ae.full,"auth-compat")}static \u0275fac=function(n){return new(n||e)};static \u0275mod=ae({type:e});static \u0275inj=se({providers:[Q]})}return e})();var Sn=(()=>{class e{constructor(t,n){this.authF=t,this.router=n,this.logado=!1}isLogado(){return this.authF.authState.pipe(y(t=>t?!0:(this.router.navigate(["auth/login"]),!1)))}login(t,n){let i=ke();ge(i,me).then(()=>{he(i,t,n).then(o=>{this.user=o.user,this.authF.authState.subscribe(a=>{a&&(this.user=a,this.router.navigate(["cliente"]))})}).catch(o=>{console.log("error: ",o);let a=o.code,c=o.message;window.alert(o.message)})}).catch(o=>{let a=o.code,c=o.message})}logout(){this.authF.signOut()}static{this.\u0275fac=function(n){return new(n||e)(d(Q),d(le))}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{Pt as a,be as b,In as c,Sn as d};
