<div class="grid">
    <div class="col-12 md:col-6">
        <div class="card fade-in">
            <h5><i class="pi pi-download mr-2"></i>Exportar Dados</h5>
            <p>Clique no botão abaixo para baixar um arquivo JSON contendo todos os Clientes, Planos e Servidores cadastrados.</p>
            <button pButton pRipple label="Exportar JSON" icon="pi pi-download" class="p-button-success mr-2"
                (click)="exportarJson()" [loading]="loading"></button>
        </div>
    </div>
    <div class="col-12 md:col-6">
        <div class="card fade-in">
            <h5><i class="pi pi-upload mr-2"></i>Importar Dados</h5>
            <p>Importe um arquivo JSON no mesmo formato do export.</p>
            <p-fileUpload mode="basic" name="file" accept="application/json" chooseLabel="Selecionar JSON" [maxFileSize]="2000000" (onSelect)="importarJson($event)" [disabled]="importing"></p-fileUpload>
            <div class="mt-3" *ngIf="importSummary">
                <strong>Resumo:</strong>
                <div class="flex gap-2 mt-2">
                    <p-tag severity="info" value="Importados: {{importSummary.total}}"></p-tag>
                    <p-tag severity="success" value="Novos: {{importSummary.novos}}"></p-tag>
                    <p-tag severity="warning" value="Editados: {{importSummary.editados}}"></p-tag>
                    <p-tag severity="danger" value="Inválidos: {{importSummary.invalidos}}"></p-tag>
                </div>
            </div>
        </div>
    </div>
    <div class="col-12">
        <div class="card">
            <h5>Regras e Formato</h5>
            <p>
                - Campos obrigatórios em clientes: <code>nome</code> e <code>dataVencimento</code> (ISO).<br>
                - Se o <code>nome</code> já existir, o registro é atualizado; caso contrário, é criado novo.<br>
                - <code>dataVencimento</code> é exportada e importada em ISO e convertida para o padrão do banco.<br>
                - Demais campos podem vir vazios.
            </p>
            <h6>Formato JSON</h6>
            <pre class="pre-wrap">{{ '{\n  "clientes": [\n    {\n      "nome": "Fulano",\n      "dataVencimento": "2025-12-31T00:00:00.000Z",\n      "usuario": "user1",\n      "email": "fulano@exemplo.com",\n      "telefone": "55999999999",\n      "observacao": "",\n      "servidor": null,\n      "plano": null\n    }\n  ],\n  "planos": [],\n  "servidores": []\n}' }}</pre>
        </div>
    </div>
</div>
<p-toast></p-toast>
